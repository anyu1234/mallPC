(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13b5eb19"],{"1bb8":function(e,t,r){"use strict";r("6fb5")},2291:function(e,t,r){},"23bc":function(e,t,r){},3243:function(e,t,r){"use strict";r("2291")},"5e79":function(e,t,r){"use strict";r("a4ea")},"6aee":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"productadd-container"},[r("Steps")],1)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"steps-container"},[r("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[r("el-step",{attrs:{title:"填写商品基本信息"}}),r("el-step",{attrs:{title:"填写商品销售信息"}})],1),r("keep-alive",[0==e.active?r("Fromone",{on:{next:e.next}}):r("Fromtwo",{on:{prv:e.prv,success:e.success}})],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"formone-container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"副标题",prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"商品描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),r("el-form-item",{attrs:{label:"商品类目",prop:"category"}},[r("el-select",{attrs:{placeholder:"",clearable:""},on:{change:function(t){return e.handleId(e.ruleForm.category.one)}},model:{value:e.ruleForm.category.one,callback:function(t){e.$set(e.ruleForm.category,"one",t)},expression:"ruleForm.category.one"}},e._l(e.data,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("el-select",{attrs:{placeholder:"",clearable:""},model:{value:e.ruleForm.category.two,callback:function(t){e.$set(e.ruleForm.category,"two",t)},expression:"ruleForm.category.two"}},e._l(e.c_items.c_items,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"商品标签",prop:"tags"}},[r("el-input",{model:{value:e.ruleForm.tags,callback:function(t){e.$set(e.ruleForm,"tags",t)},expression:"ruleForm.tags"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下一步")])],1)],1)],1)},l=[],c=r("c4c8"),u={data:function(){return{ruleForm:{title:"",desc:"",category:{one:"",two:""},tags:""},rules:{title:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],tags:[{required:!0,message:"请输入商品标签",trigger:"blur"}]},data:[],c_items:[]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("next",t.ruleForm),console.log()}))},handleId:function(e){this.c_items=this.data[e-1],this.ruleForm.category.two="",this.c_items||(this.c_items=[])}},created:function(){var e=this;c["a"].categoryList().then((function(t){e.data=t.data.data}))}},m=u,p=(r("5e79"),r("2877")),d=Object(p["a"])(m,n,l,!1,null,"227c0c26",null),f=d.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"formtwo-container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"商品售价",prop:"price"}},[r("el-input",{model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),r("el-form-item",{attrs:{label:"商品折扣价",prop:"price_off"}},[r("el-input",{model:{value:e.ruleForm.price_off,callback:function(t){e.$set(e.ruleForm,"price_off",t)},expression:"ruleForm.price_off"}})],1),r("el-form-item",{attrs:{label:"商品库存",prop:"inventory"}},[r("el-input",{model:{value:e.ruleForm.inventory,callback:function(t){e.$set(e.ruleForm,"inventory",t)},expression:"ruleForm.inventory"}})],1),r("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[r("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}})],1),r("el-form-item",{attrs:{label:"商品相册",prop:"img"}},[r("el-upload",{attrs:{width:"100px",action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus"})])],1),r("el-form-item",{attrs:{prop:"status"}},[r("el-checkbox",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("是否上架")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.prv}},[e._v("上一步")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("完成")])],1)],1)],1)},b=[],v={data:function(){var e=this;return{ruleForm:{price:"",price_off:"",inventory:"",unit:"",img:"",status:!0},rules:{price:[{required:!0,message:"请输入商品售价",trigger:"blur"},{validator:function(e,t,r){t=parseFloat(t),isNaN(t)?r(new Error("请输入数字")):r()},trigger:"blur"}],price_off:[{required:!0,message:"请输入商品折扣价",trigger:"blur"},{validator:function(t,r,o){r=parseFloat(r);var a=""!==e.ruleForm.price?parseFloat(e.ruleForm.price):0;0==a?o(new Error("请填写原价")):r>a?o(new Error("折扣不正确")):isNaN(r)?o(new Error("请输入数字")):o()},trigger:"blur"}],inventory:[{required:!0,message:"请输入商品库存",trigger:"blur"},{validator:function(e,t,r){t=parseFloat(t),isNaN(t)?r(new Error("请输入数字")):r()},trigger:"blur"}],unit:[{required:!0,message:"请输入商品计量单位",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("success",t.ruleForm)}))},prv:function(){this.$emit("prv",0)}}},F=v,h=(r("3243"),Object(p["a"])(F,g,b,!1,null,"63988c20",null)),y=h.exports,_={components:{Fromone:f,Fromtwo:y},data:function(){return{active:0,addData:{}}},methods:{next:function(e){this.active=1,this.addData=e},prv:function(){this.active=0},success:function(e){var t=this,r={title:this.addData.title,desc:this.addData.desc,category:parseInt(this.addData.category.one),c_items:["".concat(this.addData.category.two)],tags:["".concat(this.addData.tags)],price:parseInt(e.price),price_off:parseInt(e.price_off),unit:e.unit,status:e.status?1:0,images:["".concat(e.img)],inventory:parseInt(e.inventory)};c["a"].add(r).then((function(e){"success"==e.status&&t.$router.push({name:"productList"})}))}}},w=_,x=(r("1bb8"),Object(p["a"])(w,i,s,!1,null,"633bf9b0",null)),k=x.exports,$={components:{Steps:k}},C=$,E=(r("7184"),Object(p["a"])(C,o,a,!1,null,"75c0104b",null));t["default"]=E.exports},"6fb5":function(e,t,r){},7184:function(e,t,r){"use strict";r("23bc")},a4ea:function(e,t,r){},c4c8:function(e,t,r){"use strict";var o=r("eeb9");t["a"]={list:function(e){return o["a"].get("/products/all",{params:e})},categoryList:function(e){return o["a"].get("/category/all",{params:e})},delete:function(e){return o["a"].delete("/products/"+e)},add:function(e){return o["a"].post("/products/add",e)},modify:function(e){return o["a"].put("/passport/changeUserInfo",e)},edit:function(e){return o["a"].put("/products/edit",e)},addCategory:function(e){return o["a"].post("/category/add",e)},editCategory:function(e){return o["a"].put("/category/edit",e)},deleteCategory:function(e){return o["a"].delete("/category/"+e)}}}}]);
//# sourceMappingURL=chunk-13b5eb19.106ef597.js.map